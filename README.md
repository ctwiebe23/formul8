# NAME

formul8 â€” Automatic form handling

# SYNOPSIS

```js
import { formul8 } from "formul8"

const [form_data, change_event] = formul8("my_form_id")

do_stuff(form_data)
document.addEventListener(change_event, () => do_stuff(form_data))
```

# DESCRIPTION

Takes in a `<form/>` (or any HTML element) that contains `<input/>`,
`<select/>`, and `<textarea/>` elements, and returns an object that represents
the "state" of the form. Each of the input-like elements within the form will
have an entry in the state object whose key is the input `name` if present,
else the `id` if present, else a value auto-generated by `formul8`.

When any of the form elements change, the state object will be updated and a
custom event will be fired on the document.  The name of this event is the
second thing returned by `formul8`, and the event object holds the state
object in the `detail` field.

When the values of state object change, the form is updated to change with them
and the same custom event is fired.

Any `<fieldset/>` elements in the form create sub-objects, where the key of
the sub-object is the fieldset `name` is present, else the `id` if present,
else the text of a child `<legend/>` if present, else a value auto generated
by `formul8`.

# OPTIONS

Additional options can be passed to `formul8` through the optional
parameter `options`, a JSON object.

## DEBOUNCE

If `options.debounce` is a number, it overrides the default debounce period on
the form (0 milliseconds).

## EVENTS

If `options.events` is a list of strings, it becomes the list of events that
the form listens for to detect changes.

## DIRECTION

If `options.direction` is a `update_dir` enum value, it will define which ways
the form updates.  The directions are:

```js
update_dir.from_form = 1  // Changing the form elements changes the object.
update_dir.to_form = 2    // Changing the object changes the form elements.
```

The default value is `update_dir.from_form | update_dir.to_form`, A.K.A.
bidirectional.

## AUTO_NOTIFY

If `options.auto_notify` is true and `direction` includes `update_dir.to_form`,
then changing the state object automatically fires the custom change event
in addition to updating the form.  If you want to control this manually, set
`options.auto_notify` to false and use `notify(change_event, form_data)` to
manually fire the custom change event.

# EXAMPLE

```html
<form id="user_input_form">
  <input type="text" id="user_name" placeholder="Username..." />
  <input type="password" id="user_pass" placeholder="Password..." />

  <fieldset>
    <legend>Address</legend>

    <input type="text" id="line_1" placeholder="Line 1..." />
    <input type="text" id="line_2" placeholder="Line 2..." />
    <input type="text" id="city" placeholder="City..." />
    <input type="text" id="province" placeholder="Province..." />
    <input type="text" id="postal_code" placeholder="Postal code..." />
    <select id="country">
      <option>...</option>
      <option>Martinaise</option>
      <option>Revachol</option>
      <option>Seol</option>
      <option>Oranje</option>
    </select>
  </fieldset>

  <input type="checkbox" id="terms_of_service" />
  <label for="terms_of_service">I agree to the TOS</label>
  <input type="checkbox" id="newsletter" />
  <label for="newsletter">Sign me up for the newsletter</label>
</form>
```

```js
const [user_input, change_event] = formul8("user_input_form")

// user_input: {
//     "address": {
//         "line_1": string,
//         "line_2": string,
//         "city": string,
//         "province": string,
//         "postal_code": string,
//         "country": string
//     },
//     "user_name": string,
//     "user_pass": string,
//     "terms_of_service": boolean,
//     "newsletter": boolean
// }

do_stuff(user_input)
document.addEventListener(change_event, () => do_stuff(user_input))
```

# SEE ALSO

- [Online README](https://cwiebe.com/formul8)
- [Source code](https://github.com/ctwiebe23/formul8)
